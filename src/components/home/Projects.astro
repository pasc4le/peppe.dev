---
import { getCollection, render } from "astro:content";

interface Props {
  filter?: (p: CollectionEntry<"projects">) => boolean;
}

import ProjectRenderer from "./ProjectRenderer.astro";
import type { CollectionEntry } from "astro:content";

const { filter } = Astro.props;

let projects = (await getCollection("projects")).toSorted((a, b) =>
  a.id.localeCompare(b.id),
);

if (filter) projects = projects.filter(filter);
---

{projects.map((project) => <ProjectRenderer {project} />)}
